<div class="portlet box">
    <div class="portlet-body form">
        <form class="form-horizontal" name="form">
            <div class="form-body">
                <div class="tabtable table-custom table-full-width">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#tab_1" data-toggle="tab">场景</a>
                        </li>
                        <li>
                            <a href="#tab_2" data-toggle="tab">角色成员</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab_1">
                            <div class="form-body">
                                <div class="form-group">
                                    <label class="control-label col-md-2">角色场景名称</label>

                                    <div class="col-md-4">
                                        <input type="text" name="name" class="form-control" ng-model="model.name"
                                               required=""/>

                                        <div ng-show="form.$submitted || form.name.$touched">
                                            <span ng-show="form.name.$error.required" class="help-block">请填写角色场景名称</span>
                                        </div>
                                    </div>
                                    <div class="col-md-2" ng-if="model._id">
                                        <label class="form-text"><a href="/role-scene/{{model._id}}">预览</a></label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2">角色场景标题</label>

                                    <div class="col-md-4">
                                        <input type="text" name="title" class="form-control" ng-model="model.title"
                                               required=""/>

                                        <div ng-show="form.$submitted || form.route.$touched">
                                            <span ng-show="form.title.$error.required"
                                                  class="help-block">请填写角色场景标题</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2">封面图</label>

                                    <div class="col-md-4">
                                        <button class="img-upload" type="file" ngf-select="uploadImage($file, $invalidFiles)"
                                                accept="image/*" ngf-max-height="1000" ngf-max-size="1MB">
                                            上传图片
                                        </button>
                                        <div ng-if="model.coverImg">
                                            <a class='img-link' href="{{model.coverImg}}" ng-click="showOriginImg()">
                                                <img ng-src="{{model.coverImg}}" width="300" alt="" />
                                            </a>
                                        </div>
                                        <!--File:-->
                                        <!--<div>{{f.name}} {{errFile.name}} {{errFile.$error}}-->
                                        <!--{{errFile.$errorParam}}-->
                                        <!--<span class="progress" ng-show="f.progress >= 0">-->
                                        <!--<div style="width:{{f.progress}}%"-->
                                        <!--ng-bind="f.progress + '%'"></div>-->
                                        <!--</span>-->
                                    </div>
                                    {{errorMsg}}
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2">描述</label>

                                    <div class="col-md-4">
                                        <textarea class="form-control" ng-model="model.description" rows="4" cols="20"
                                                  name="description"></textarea>
                                    </div>
                                </div>
                                <div class="form-group" ng-if="model.createTime">
                                    <label class="control-label col-md-2">创建时间</label>

                                    <div class="col-md-4">
                                        <label class="form-text">{{model.createTime}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane role-item" id="tab_2">
                            <a ui-sref="editRoleItem({roleSceneId:model._id})" class="btn blue"><i class="fa fa-plus"></i> 添加</a>
                            <div tasty-table bind-resource-callback="getResource" bind-init="paginationSetting" bind-filters="filterBy">
                                <table class="table datatable table-striped table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th width="150">
                                            角色成员
                                        </th>
                                        <th width="60">
                                            排序
                                        </th>
                                        <th>
                                            描述
                                        </th>
                                        <th width="160">
                                            创建时间
                                        </th>
                                        <th width="80">
                                            操作
                                        </th>
                                        <th width="80">
                                            操作
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="row in rows">
                                        <td>{{row.name}}</td>
                                        <td>{{row.displayOrder}}</td>
                                        <td>{{row.description}}</td>
                                        <td>{{row.createTime}}</td>
                                        <td><a class="btn btn-xs purple" ui-sref="editRoleItem({roleSceneId:model._id, id:row._id})"><i class="fa fa-edit"></i>编辑</a></td>
                                        <td><a class="btn btn-xs red" href="javascript:void(0)" ng-click="remove(row._id)"><i class="fa fa-times"></i>删除</a></td>
                                    </tr>
                                    </tbody>
                                </table>
                                <div tasty-pagination></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-actions fluid">
                <div class="col-md-offset-2 col-md-9">
                    <input type="button" name="cancel" class="btn dark" value="取消" ui-sref="roleScene"/>
                    <input type="submit" name="save" ng-disabled="form.$pristine || form.$invalid" class="btn blue"
                           value="保存"
                           ng-click="save()"/>
                </div>
            </div>
        </form>
    </div>
</div>